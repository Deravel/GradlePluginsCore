apply plugin: 'bancvue'
apply plugin: 'integration-test'
apply plugin: 'license-ext'

repositories {
	mavenCentral()
}

dependencies {
	compile gradleApi()
	compile 'org.codehaus.groovy:groovy-all:2.1.2'
	compile 'nl.javadude.gradle.plugins:license-gradle-plugin:0.6.0'

	testCompile 'junit:junit:4.11'
	testCompile 'org.mockito:mockito-all:1.9.5'
}

check.dependsOn integrationTest

license {
	ext.name = 'BancVue, LTD'
}

// exclude the test kit source which was copied from a different project (https://github.com/alkemist/gradle-test-kit)
// and has it's own license
tasks.withType(nl.javadude.gradle.plugins.license.License).each { licenseTask ->
	licenseTask.exclude 'org/gradle/testkit/**'
}
licenseMain.exclude 'licenses/*'


publishingext {
	publications {
		'gradleCore' {
			pom.withXml {
				asNode().children().last() + {
					resolveStrategy = Closure.DELEGATE_FIRST
					packaging 'jar'
					url 'https://github.com/BancVue/GradlePluginsCore'
					description 'Gradle plugins for general project development'
					developers {
						developer {
							id 'bancvue_oss'
							name 'BancVue Open Source Development'
							email 'opensource@bancvue.com'
						}
					}
					scm {
						url 'https://github.com/BancVue/GradlePluginsCore.git'
						connection 'scm:git:git@github.com:BancVue/GradlePluginsCore.git'
						developerConnection 'scm:git:git@github.com:BancVue/GradlePluginsCore.git'
					}
				}
			}
		}
	}
}